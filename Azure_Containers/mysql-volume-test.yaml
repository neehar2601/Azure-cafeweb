apiVersion: '2021-09-01'
location: southeastasia
name: test-mysql-volume
properties:
  volumes:
  - name: mysql-data
    azureFile:
      shareName: <Enter the share name>
      storageAccountName: <Enter the storage account name>
      storageAccountKey: <Enter the storage account key>

  containers:
  - name: mysql-test
    properties:
      image: mysql:8.0
      resources:
        requests:
          cpu: 0.5
          memoryInGb: 0.5
      environmentVariables:
      - name: MYSQL_ROOT_PASSWORD
        value: 'test123'
      - name: MYSQL_DATABASE
        value: 'testdb'
      volumeMounts:
      - mountPath: /var/lib/mysql
        name: mysql-data
      ports:
      - port: 3306
        protocol: TCP

  imageRegistryCredentials: []  # No ACR needed for official mysql image

  osType: Linux
  restartPolicy: Always
